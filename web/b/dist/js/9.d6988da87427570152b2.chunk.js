webpackJsonp([9],{580:function(e,t,i){i(716);var a=i(32)(i(652),i(783),null,null);a.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\edittypepage.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] edittypepage.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},616:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=i(26),n=function(e){return e&&e.__esModule?e:{default:e}}(a);t.default=new n.default},619:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var a=i(616),n=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(e,t,i,a){return t("Button",{props:{type:i.editting?"success":"primary",loading:i.saving},style:{margin:"0 5px"},on:{click:function(){if(i.editting){e.$store.state.goods.edittingStore[a].saving=!0,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore));var t=e.$store.state.goods.edittingStore[a];t.editting=!1,t.saving=!1,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore)),e.$emit("input",e.handleBackdata(e.thisTableData)),e.$emit("on-change",e.handleBackdata(e.thisTableData),a)}else{if(i.edittingCell)for(var n in i.edittingCell)i.edittingCell[n]=!1,e.$store.state.goods.edittingStore[a].edittingCell[n]=!1;e.$store.state.goods.edittingStore[a].editting=!0,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore))}}}},i.editting?"保存":"编辑")},o=function(e,t,i,a){return t("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){console.log(e.thisTableData[a].id),e.thisTableData[a].id&&n.default.$emit("delete",e.thisTableData[a].id),e.thisTableData.splice(a,1),e.$emit("input",e.handleBackdata(e.thisTableData)),e.$emit("on-delete",e.handleBackdata(e.thisTableData),a),e.$store.state.goods.edittingStore.splice(a,1)}}},[t("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},l=function(e,t,i){return t("Button",{props:{type:"text",icon:"edit"},on:{click:function(t){e.$store.state.goods.edittingStore[i.index].edittingCell[i.column.key]=!1}},style:{display:"none"}})},r=function(e,t,i,a){return t("Input",{props:{type:"text",value:e.$store.state.goods.edittingStore[i.index][a.key]},on:{"on-change":function(t){var s=a.key;e.$store.state.goods.edittingStore[i.index][s]=t.target.value,console.log("onchange"),n.default.$emit("updatetable",i.index,s,t.target.value)},"on-focus":function(e){if("spenameid"==i.column.key){a.key;n.default.$emit("changevisible",i.index),console.log("click")}},"on-blur":function(t){var i=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore));e.$store.state.goods.edittingStore=i}}})};t.default={name:"canEditTable",props:{refs:String,loading:Boolean,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var e=this,t=this,i=this.columnsList.filter(function(e){if(e.editable&&!0===e.editable)return e}),a=JSON.parse(JSON.stringify(this.value)),n=[];n=a.map(function(t,a){var n=!1;if(e.thisTableData[a])if(e.thisTableData[a].editting)n=!0;else for(var s in e.thisTableData[a].edittingCell)!0===e.thisTableData[a].edittingCell[s]&&(n=!0);if(n)return e.thisTableData[a];e.$set(t,"editting",!1);var o={};return i.forEach(function(e){o[e.key]=!1}),e.$set(t,"edittingCell",o),t}),this.thisTableData=n,this.$store.state.goods.edittingStore=JSON.parse(JSON.stringify(this.thisTableData)),this.columnsList.forEach(function(i){i.editable&&(i.render=function(a,n){var s=e.thisTableData[n.index];return s.editting?a("Input",{props:{type:"text",value:s[i.key]},on:{"on-change":function(e){var i=n.column.key;t.$store.state.goods.edittingStore[n.index][i]=e.target.value}}}):e.editIncell?a("Row",{props:{type:"flex",align:"middle",justify:"center"}},[a("Col",{props:{span:"22"}},[s.edittingCell[n.column.key]?a("span",s[i.key]):r(e,a,n,i)]),a("Col",{props:{span:"2"}},[(s.edittingCell[n.column.key],l(e,a,n))])]):a("span",s[i.key])}),i.handle&&(i.render=function(t,a){var n=e.thisTableData[a.index],l=[];return i.handle.forEach(function(i){"edit"===i?l.push(s(e,t,n,a.index)):"delete"===i&&l.push(o(e,t,0,a.index))}),t("div",l)})})},handleBackdata:function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach(function(e){delete e.editting,delete e.edittingCell,delete e.saving}),t},selectedIds:function(e){var t="";if(e&&e.length>0)for(var i=e.length,a=0;a<i;a++)t+=a===i-1?e[a].id:e[a].id+",";n.default.$emit("selectdelectList",t)}},watch:{value:function(e){this.init()}}}},620:function(e,t){},621:function(e,t,i){i(620);var a=i(32)(i(619),i(622),null,null);a.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\components\\canEditTable.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] canEditTable.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},622:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Table",{ref:e.refs,attrs:{columns:e.columnsList,loading:e.loading,data:e.thisTableData,border:"","disabled-hover":"","highlight-row":""},on:{"on-selection-change":e.selectedIds}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},652:function(e,t,i){function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(47),s=(a(n),i(77)),o=i(621),l=a(o),r=i(616),d=a(r);t.default={name:"supplierpage",components:{"can-edit-table":l.default},data:function(){return{selectedIdList:"",parentdata:[],parentId:"0",insertsort:"",isIndexOnline:!1,insertname:"",insertgrade:"",loading:!1,visible:!1,parname:"",name:"",grade:"",id:"",tableloading:!1,pageNumber:1,pageCount:0,totalPages:0,pagesizes:20,tableColumns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id",align:"left"},{title:"名称",key:"name",align:"left",editable:!0},{title:"删除",align:"center",key:"handle",width:100,handle:["delete"]}],ids:"",tableData:[],selectList:[]}},mounted:function(){var e=this,t=this;d.default.$off("selectdelectList"),d.default.$off("delete"),(0,s.getgoodtypelist)(this.pageNumber,this.pagesizes,this.id,this.name).then(function(t){console.log(t),e.tableData=t.data.list,e.pageCount=t.data.totalRow,e.totalPages=t.data.totalPage,e.pagesizes=t.data.pageSize}),d.default.$on("selectdelectList",function(e){t.selectedIdList=e;null!==t.selectedIdList&&void 0!==t.selectedIdList&&t.selectedIdList}),d.default.$on("delete",function(e){console.log(e);var i={id:e};(0,s.delgoodtypeid)(i).then(function(e){e.success?t.$Message.success("删除成功"):(console.log(e.message),t.$Message.error(e.message))})})},watch:{},methods:{updateLists:function(){var e=this;if(null!==this.selectedIdList&&void 0!==this.selectedIdList&&""!==this.selectedIdList){var t=this.selectedIdList.split(","),i={},a=[],n=!0,o=!1,l=void 0;try{for(var r,d=t[Symbol.iterator]();!(n=(r=d.next()).done);n=!0){var c=r.value,u=!0,p=!1,g=void 0;try{for(var f,h=this.$store.state.goods.cacheGoodsTable[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var v=f.value;v.id==c&&a.push({id:v.id,name:v.name})}}catch(e){p=!0,g=e}finally{try{!u&&h.return&&h.return()}finally{if(p)throw g}}}}catch(e){o=!0,l=e}finally{try{!n&&d.return&&d.return()}finally{if(o)throw l}}console.log("data"),console.log(a),i.batchUpdateColumnsList=a,(0,s.updategoodtype)(i).then(function(t){t.success?(e.$Message.success("修改成功"),e.getTableList(e.pageNumber)):(console.log(t.message),e.$Message.error(t.message))})}else this.$Message.error("请选择选项")},getTableList:function(e){var t=this;this.pageNumber=e,(0,s.getgoodtypelist)(e,this.pagesizes,this.id,this.name).then(function(e){console.log(e),t.tableData=e.data.list,t.pageCount=e.data.totalRow,t.totalPages=e.data.totalPage,t.pagesizes=e.data.pageSize})},insert:function(){var e=this;if(this.insertname){var t={name:this.insertname};(0,s.insertgoodtype)(t).then(function(t){"200"==t.code?(e.$Modal.success({title:"温馨提示",content:"<p>新建成功</p>"}),e.getTableList(e.pageNumber)):e.$Modal.error({title:"温馨提示",content:t.message})}),this.insertname="",this.visible=!1}else this.$Modal.error({title:"提示",content:"<p>请输入所要创建的供应商</p>"})}}}},716:function(e,t){},783:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("row",[i("card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("icon",{attrs:{type:"ios-list"}}),e._v("\n                    商品类型列表\n                ")],1),e._v(" "),i("p"),e._v(" "),i("div",{staticClass:"sreach"},[i("div",{staticClass:"sreach-page"},[i("div",{staticClass:"sreach-box"},[i("span",[e._v("ID:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入ID..."},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}})],1),e._v(" "),i("div",{staticClass:"sreach-box"},[i("span",[e._v("名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入名称..."},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),i("div",{staticClass:"sreach-box"},[i("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[i("i-button",{attrs:{type:"info",icon:"ios-search"},on:{click:function(t){e.getTableList(1)}}},[e._v("搜索")]),e._v("\n\t                             \n\t                            "),i("i-button",{attrs:{type:"info",icon:""},on:{click:e.updateLists}},[e._v("保存")]),e._v("\n                    \t\t\t \n                    \t\t\t"),i("i-button",{attrs:{type:"info",icon:""},on:{click:function(t){e.visible=!0}}},[e._v("新增")])],1)])]),e._v(" "),i("div",{staticClass:"sreach-page"},[i("div",{staticClass:"sreach-box linenumcss"},[i("p",[e._v("总共 "),i("span",[e._v(e._s(e.pageCount))]),e._v(" 条记录")]),e._v(" "),i("p",[e._v("共 "),i("span",[e._v(e._s(e.totalPages))]),e._v(" 页")])])])]),e._v(" "),i("div",{staticClass:"tableContainer"},[i("can-edit-table",{staticClass:"table",attrs:{refs:"tableExcel",editIncell:!0,"columns-list":e.tableColumns},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}})],1),e._v(" "),i("div",{staticClass:"page-box",staticStyle:{"text-align":"right","margin-top":"15px"}},[i("page",{attrs:{total:e.pageCount,"page-size":e.pagesizes,current:e.pageNumber,"show-elevator":"","show-total":""},on:{"on-change":e.getTableList}})],1)])],1),e._v(" "),i("modal",{attrs:{title:"新增商品类型",loading:e.loading,closable:!1},on:{"on-ok":e.insert},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"informationbox"},[i("span",[e._v("名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入名称"},model:{value:e.insertname,callback:function(t){e.insertname=t},expression:"insertname"}})],1),e._v(" "),i("br")])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});