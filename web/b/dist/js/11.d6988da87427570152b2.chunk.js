webpackJsonp([11],{578:function(e,t,i){i(742);var n=i(32)(i(650),i(812),null,null);n.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\editlabelpage.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] editlabelpage.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},616:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(26),a=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=new a.default},619:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0});var n=i(616),a=function(e){return e&&e.__esModule?e:{default:e}}(n),s=function(e,t,i,n){return t("Button",{props:{type:i.editting?"success":"primary",loading:i.saving},style:{margin:"0 5px"},on:{click:function(){if(i.editting){e.$store.state.goods.edittingStore[n].saving=!0,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore));var t=e.$store.state.goods.edittingStore[n];t.editting=!1,t.saving=!1,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore)),e.$emit("input",e.handleBackdata(e.thisTableData)),e.$emit("on-change",e.handleBackdata(e.thisTableData),n)}else{if(i.edittingCell)for(var a in i.edittingCell)i.edittingCell[a]=!1,e.$store.state.goods.edittingStore[n].edittingCell[a]=!1;e.$store.state.goods.edittingStore[n].editting=!0,e.thisTableData=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore))}}}},i.editting?"保存":"编辑")},o=function(e,t,i,n){return t("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){console.log(e.thisTableData[n].id),e.thisTableData[n].id&&a.default.$emit("delete",e.thisTableData[n].id),e.thisTableData.splice(n,1),e.$emit("input",e.handleBackdata(e.thisTableData)),e.$emit("on-delete",e.handleBackdata(e.thisTableData),n),e.$store.state.goods.edittingStore.splice(n,1)}}},[t("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},l=function(e,t,i){return t("Button",{props:{type:"text",icon:"edit"},on:{click:function(t){e.$store.state.goods.edittingStore[i.index].edittingCell[i.column.key]=!1}},style:{display:"none"}})},r=function(e,t,i,n){return t("Input",{props:{type:"text",value:e.$store.state.goods.edittingStore[i.index][n.key]},on:{"on-change":function(t){var s=n.key;e.$store.state.goods.edittingStore[i.index][s]=t.target.value,console.log("onchange"),a.default.$emit("updatetable",i.index,s,t.target.value)},"on-focus":function(e){if("spenameid"==i.column.key){n.key;a.default.$emit("changevisible",i.index),console.log("click")}},"on-blur":function(t){var i=JSON.parse(JSON.stringify(e.$store.state.goods.edittingStore));e.$store.state.goods.edittingStore=i}}})};t.default={name:"canEditTable",props:{refs:String,loading:Boolean,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var e=this,t=this,i=this.columnsList.filter(function(e){if(e.editable&&!0===e.editable)return e}),n=JSON.parse(JSON.stringify(this.value)),a=[];a=n.map(function(t,n){var a=!1;if(e.thisTableData[n])if(e.thisTableData[n].editting)a=!0;else for(var s in e.thisTableData[n].edittingCell)!0===e.thisTableData[n].edittingCell[s]&&(a=!0);if(a)return e.thisTableData[n];e.$set(t,"editting",!1);var o={};return i.forEach(function(e){o[e.key]=!1}),e.$set(t,"edittingCell",o),t}),this.thisTableData=a,this.$store.state.goods.edittingStore=JSON.parse(JSON.stringify(this.thisTableData)),this.columnsList.forEach(function(i){i.editable&&(i.render=function(n,a){var s=e.thisTableData[a.index];return s.editting?n("Input",{props:{type:"text",value:s[i.key]},on:{"on-change":function(e){var i=a.column.key;t.$store.state.goods.edittingStore[a.index][i]=e.target.value}}}):e.editIncell?n("Row",{props:{type:"flex",align:"middle",justify:"center"}},[n("Col",{props:{span:"22"}},[s.edittingCell[a.column.key]?n("span",s[i.key]):r(e,n,a,i)]),n("Col",{props:{span:"2"}},[(s.edittingCell[a.column.key],l(e,n,a))])]):n("span",s[i.key])}),i.handle&&(i.render=function(t,n){var a=e.thisTableData[n.index],l=[];return i.handle.forEach(function(i){"edit"===i?l.push(s(e,t,a,n.index)):"delete"===i&&l.push(o(e,t,0,n.index))}),t("div",l)})})},handleBackdata:function(e){var t=JSON.parse(JSON.stringify(e));return t.forEach(function(e){delete e.editting,delete e.edittingCell,delete e.saving}),t},selectedIds:function(e){var t="";if(e&&e.length>0)for(var i=e.length,n=0;n<i;n++)t+=n===i-1?e[n].id:e[n].id+",";a.default.$emit("selectdelectList",t)}},watch:{value:function(e){this.init()}}}},620:function(e,t){},621:function(e,t,i){i(620);var n=i(32)(i(619),i(622),null,null);n.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\components\\canEditTable.vue",n.esModule&&Object.keys(n.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] canEditTable.vue: functional components are not supported with templates, they should use render functions."),e.exports=n.exports},622:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Table",{ref:e.refs,attrs:{columns:e.columnsList,loading:e.loading,data:e.thisTableData,border:"","disabled-hover":"","highlight-row":""},on:{"on-selection-change":e.selectedIds}})],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},650:function(e,t,i){function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=i(47),s=n(a),o=i(77),l=i(621),r=n(l),d=i(616),c=n(d);t.default={name:"categorypage",components:{"can-edit-table":r.default},data:function(){var e=this,t=this;return{insertgrade2:"",parentId2:"",insertname2:"",insertsort2:"",isIndexOnline2:!1,selectedIdList:"",parentdata:[],parentId:"0",insertsort:"",isIndexOnline:!1,insertname:"",insertgrade:"",loading:!1,visible:!1,visible2:!1,parname:"",name:"",grade:"",id:"",tableloading:!1,pageNumber:1,pageCount:0,totalPages:0,pagesizes:20,tableColumns:[{type:"selection",width:60,align:"center"},{title:"级别",key:"grade",width:80,align:"left"},{title:"上级名称",key:"parent.name",width:100,align:"left"},{title:"名称",key:"name",align:"left",editable:!0},{title:"排序",key:"sort",align:"left",width:150,editable:!0},{title:"新增子类",key:"action",width:100,align:"center",render:function(e,i){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.visible2=!0,t.parentId2=i.row.id,t.insertgrade2=i.row.grade+1}}},"新增")])}},{title:"详情",key:"action",width:100,align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t={id:i.row.id};console.log(t),s.default.openNewPage(e,"editlabeldetails",t),e.$router.push({name:"editlabeldetails",params:t})}}},"详情")])}},{title:"删除",align:"center",key:"handle",width:100,handle:["delete"]}],ids:"",tableData:[],selectList:[]}},mounted:function(){var e=this,t=this;c.default.$off("selectdelectList"),c.default.$off("delete"),(0,o.getlabellist)(this.pageNumber,this.pagesizes,this.grade,this.name,this.parname).then(function(t){console.log(t),e.tableData=t.data.list,e.pageCount=t.data.totalRow,e.totalPages=t.data.totalPage,e.pagesizes=t.data.pageSize}),c.default.$on("selectdelectList",function(e){t.selectedIdList=e;null!==t.selectedIdList&&void 0!==t.selectedIdList&&t.selectedIdList}),c.default.$on("delete",function(e){console.log(e);var i={id:e};(0,o.dellabelid)(i).then(function(e){e.success?t.$Message.success("删除成功"):(console.log(e.message),t.$Message.error(e.message))})})},watch:{},methods:{getpar:function(){var e=this;if(this.insertgrade){var t=this.insertgrade-1;(0,o.getlabellist)("","",t).then(function(t){e.parentdata=t.data.list,console.log(e.parentdata)})}},updateLists:function(){var e=this;if(null!==this.selectedIdList&&void 0!==this.selectedIdList&&""!==this.selectedIdList){var t=this.selectedIdList.split(","),i={},n=[],a=!0,s=!1,l=void 0;try{for(var r,d=t[Symbol.iterator]();!(a=(r=d.next()).done);a=!0){var c=r.value,u=!0,p=!1,g=void 0;try{for(var v,h=this.$store.state.goods.cacheGoodsTable[Symbol.iterator]();!(u=(v=h.next()).done);u=!0){var f=v.value;f.id==c&&n.push({id:f.id,sort:f.sort,name:f.name})}}catch(e){p=!0,g=e}finally{try{!u&&h.return&&h.return()}finally{if(p)throw g}}}}catch(e){s=!0,l=e}finally{try{!a&&d.return&&d.return()}finally{if(s)throw l}}console.log("data"),console.log(n),i.batchUpdateColumnsList=n,(0,o.updatelabellist)(i).then(function(t){t.success?(e.$Message.success("修改成功"),e.getTableList(e.pageNumber)):(console.log(t.message),e.$Message.error(t.message))})}else this.$Message.error("请选择选项")},getTableList:function(e){var t=this;this.pageNumber=e,(0,o.getlabellist)(e,this.pagesizes,this.grade,this.name,this.parname).then(function(e){console.log(e),t.tableData=e.data.list,t.pageCount=e.data.totalRow,t.totalPages=e.data.totalPage,t.pagesizes=e.data.pageSize})},reset:function(){this.name="",this.parname="",this.grade=""},insert:function(){var e=this;if(this.insertgrade&&this.parentId&&this.insertname&&this.insertsort&&this.isIndexOnline){var t={grade:this.insertgrade,parentId:this.parentId,name:this.insertname,isIndexOnline:1==this.isIndexOnline?1:0,sort:this.insertsort};(0,o.insertlabel)(t).then(function(t){t.success?(e.$Message.success("新增成功"),e.getTableList(e.pageNumber),e.insertgrade="",e.parentId="",e.insertname="",e.isIndexOnline=!1,e.insertsort=""):e.$Message.error(t.message)})}else this.$Modal.error({title:"提示",content:"<p>请填写完整信息</p>"})},insert2:function(){var e=this;if(this.insertgrade2&&this.parentId2&&this.insertname2&&this.insertsort2&&this.isIndexOnline2){var t={grade:this.insertgrade2,parentId:this.parentId2,name:this.insertname2,isIndexOnline:1==this.isIndexOnline2?1:0,sort:this.insertsort2};console.log(t),(0,o.insertlabel)(t).then(function(t){t.success?(e.$Message.success("新增成功"),e.getTableList(e.pageNumber),e.insertname2="",e.insertsort2="",e.isIndexOnline2=!1):e.$Message.error(t.message)})}else this.$Modal.error({title:"提示",content:"<p>请填写完整信息</p>"})}}}},742:function(e,t){},812:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("row",[i("card",[i("p",{attrs:{slot:"title"},slot:"title"},[i("icon",{attrs:{type:"ios-list"}}),e._v("\n                    商品标签列表\n                ")],1),e._v(" "),i("p"),e._v(" "),i("div",{staticClass:"sreach"},[i("div",{staticClass:"sreach-page"},[i("div",{staticClass:"sreach-box"},[i("span",[e._v("级别:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入级别..."},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}})],1),e._v(" "),i("div",{staticClass:"sreach-box"},[i("span",[e._v("上级名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入上级名称..."},model:{value:e.parname,callback:function(t){e.parname=t},expression:"parname"}})],1),e._v(" "),i("div",{staticClass:"sreach-box"},[i("span",[e._v("名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入名称..."},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),e._v(" "),i("div",{staticClass:"sreach-box"},[i("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[i("i-button",{attrs:{type:"info",icon:"ios-search"},on:{click:function(t){e.getTableList(1)}}},[e._v("搜索")]),e._v(" "),i("i-button",{attrs:{type:"info",icon:""},on:{click:e.updateLists}},[e._v("保存")]),e._v(" "),i("i-button",{attrs:{type:"info",icon:""},on:{click:function(t){e.visible=!0}}},[e._v("新增")])],1)])]),e._v(" "),i("div",{staticClass:"sreach-page"},[i("div",{staticClass:"sreach-box linenumcss"},[i("p",[e._v("总共 "),i("span",[e._v(e._s(e.pageCount))]),e._v(" 条记录")]),e._v(" "),i("p",[e._v("共 "),i("span",[e._v(e._s(e.totalPages))]),e._v(" 页")])])])]),e._v(" "),i("div",{staticClass:"tableContainer"},[i("can-edit-table",{staticClass:"table",attrs:{refs:"tableExcel",editIncell:!0,"columns-list":e.tableColumns},model:{value:e.tableData,callback:function(t){e.tableData=t},expression:"tableData"}})],1),e._v(" "),i("div",{staticClass:"page-box",staticStyle:{"text-align":"right","margin-top":"15px"}},[i("page",{attrs:{total:e.pageCount,"page-size":e.pagesizes,current:e.pageNumber,"show-elevator":"","show-total":""},on:{"on-change":e.getTableList}})],1)])],1),e._v(" "),i("modal",{attrs:{title:"新增标签",loading:e.loading,closable:!1},on:{"on-ok":e.insert},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[i("div",{staticClass:"informationbox"},[i("span",[e._v("级别:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入级别"},on:{"on-change":e.getpar},model:{value:e.insertgrade,callback:function(t){e.insertgrade=t},expression:"insertgrade"}})],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[e._v("上级名称:")]),e._v(" "),i("i-select",{attrs:{clearable:"",filterable:""},model:{value:e.parentId,callback:function(t){e.parentId=t},expression:"parentId"}},e._l(e.parentdata,function(t){return i("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[e._v("名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入名称"},model:{value:e.insertname,callback:function(t){e.insertname=t},expression:"insertname"}})],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[e._v("序号:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入序号"},model:{value:e.insertsort,callback:function(t){e.insertsort=t},expression:"insertsort"}})],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[i("b",[e._v("是否上线主页")]),e._v(": ")]),e._v(" "),i("div",{staticClass:"ivu-input-wrapper"},[i("i-switch",{model:{value:e.isIndexOnline,callback:function(t){e.isIndexOnline=t},expression:"isIndexOnline"}})],1)])]),e._v(" "),i("modal",{attrs:{title:"新增子类",closable:!1},on:{"on-ok":e.insert2},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[i("div",{staticClass:"informationbox"},[i("span",[e._v("名称:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入名称"},model:{value:e.insertname2,callback:function(t){e.insertname2=t},expression:"insertname2"}})],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[e._v("序号:")]),e._v(" "),i("i-input",{attrs:{placeholder:"请输入序号"},model:{value:e.insertsort2,callback:function(t){e.insertsort2=t},expression:"insertsort2"}})],1),e._v(" "),i("br"),e._v(" "),i("div",{staticClass:"informationbox"},[i("span",[i("b",[e._v("是否上线主页")]),e._v(": ")]),e._v(" "),i("div",{staticClass:"ivu-input-wrapper"},[i("i-switch",{model:{value:e.isIndexOnline2,callback:function(t){e.isIndexOnline2=t},expression:"isIndexOnline2"}})],1)])])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});