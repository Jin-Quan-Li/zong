webpackJsonp([8],{582:function(t,e,a){a(725);var i=a(32)(a(654),a(793),null,null);i.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\goodslist.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] goodslist.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},616:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0});var i=a(26),n=function(t){return t&&t.__esModule?t:{default:t}}(i);e.default=new n.default},619:function(t,e,a){Object.defineProperty(e,"__esModule",{value:!0});var i=a(616),n=function(t){return t&&t.__esModule?t:{default:t}}(i),s=function(t,e,a,i){return e("Button",{props:{type:a.editting?"success":"primary",loading:a.saving},style:{margin:"0 5px"},on:{click:function(){if(a.editting){t.$store.state.goods.edittingStore[i].saving=!0,t.thisTableData=JSON.parse(JSON.stringify(t.$store.state.goods.edittingStore));var e=t.$store.state.goods.edittingStore[i];e.editting=!1,e.saving=!1,t.thisTableData=JSON.parse(JSON.stringify(t.$store.state.goods.edittingStore)),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-change",t.handleBackdata(t.thisTableData),i)}else{if(a.edittingCell)for(var n in a.edittingCell)a.edittingCell[n]=!1,t.$store.state.goods.edittingStore[i].edittingCell[n]=!1;t.$store.state.goods.edittingStore[i].editting=!0,t.thisTableData=JSON.parse(JSON.stringify(t.$store.state.goods.edittingStore))}}}},a.editting?"保存":"编辑")},o=function(t,e,a,i){return e("Poptip",{props:{confirm:!0,title:"您确定要删除这条数据吗?",transfer:!0},on:{"on-ok":function(){console.log(t.thisTableData[i].id),t.thisTableData[i].id&&n.default.$emit("delete",t.thisTableData[i].id),t.thisTableData.splice(i,1),t.$emit("input",t.handleBackdata(t.thisTableData)),t.$emit("on-delete",t.handleBackdata(t.thisTableData),i),t.$store.state.goods.edittingStore.splice(i,1)}}},[e("Button",{style:{margin:"0 5px"},props:{type:"error",placement:"top"}},"删除")])},l=function(t,e,a){return e("Button",{props:{type:"text",icon:"edit"},on:{click:function(e){t.$store.state.goods.edittingStore[a.index].edittingCell[a.column.key]=!1}},style:{display:"none"}})},r=function(t,e,a,i){return e("Input",{props:{type:"text",value:t.$store.state.goods.edittingStore[a.index][i.key]},on:{"on-change":function(e){var s=i.key;t.$store.state.goods.edittingStore[a.index][s]=e.target.value,console.log("onchange"),n.default.$emit("updatetable",a.index,s,e.target.value)},"on-focus":function(t){if("spenameid"==a.column.key){i.key;n.default.$emit("changevisible",a.index),console.log("click")}},"on-blur":function(e){var a=JSON.parse(JSON.stringify(t.$store.state.goods.edittingStore));t.$store.state.goods.edittingStore=a}}})};e.default={name:"canEditTable",props:{refs:String,loading:Boolean,columnsList:Array,value:Array,url:String,editIncell:{type:Boolean,default:!1},hoverShow:{type:Boolean,default:!1}},data:function(){return{columns:[],thisTableData:[],edittingStore:[]}},created:function(){this.init()},methods:{init:function(){var t=this,e=this,a=this.columnsList.filter(function(t){if(t.editable&&!0===t.editable)return t}),i=JSON.parse(JSON.stringify(this.value)),n=[];n=i.map(function(e,i){var n=!1;if(t.thisTableData[i])if(t.thisTableData[i].editting)n=!0;else for(var s in t.thisTableData[i].edittingCell)!0===t.thisTableData[i].edittingCell[s]&&(n=!0);if(n)return t.thisTableData[i];t.$set(e,"editting",!1);var o={};return a.forEach(function(t){o[t.key]=!1}),t.$set(e,"edittingCell",o),e}),this.thisTableData=n,this.$store.state.goods.edittingStore=JSON.parse(JSON.stringify(this.thisTableData)),this.columnsList.forEach(function(a){a.editable&&(a.render=function(i,n){var s=t.thisTableData[n.index];return s.editting?i("Input",{props:{type:"text",value:s[a.key]},on:{"on-change":function(t){var a=n.column.key;e.$store.state.goods.edittingStore[n.index][a]=t.target.value}}}):t.editIncell?i("Row",{props:{type:"flex",align:"middle",justify:"center"}},[i("Col",{props:{span:"22"}},[s.edittingCell[n.column.key]?i("span",s[a.key]):r(t,i,n,a)]),i("Col",{props:{span:"2"}},[(s.edittingCell[n.column.key],l(t,i,n))])]):i("span",s[a.key])}),a.handle&&(a.render=function(e,i){var n=t.thisTableData[i.index],l=[];return a.handle.forEach(function(a){"edit"===a?l.push(s(t,e,n,i.index)):"delete"===a&&l.push(o(t,e,0,i.index))}),e("div",l)})})},handleBackdata:function(t){var e=JSON.parse(JSON.stringify(t));return e.forEach(function(t){delete t.editting,delete t.edittingCell,delete t.saving}),e},selectedIds:function(t){var e="";if(t&&t.length>0)for(var a=t.length,i=0;i<a;i++)e+=i===a-1?t[i].id:t[i].id+",";n.default.$emit("selectdelectList",e)}},watch:{value:function(t){this.init()}}}},620:function(t,e){},621:function(t,e,a){a(620);var i=a(32)(a(619),a(622),null,null);i.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\components\\canEditTable.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] canEditTable.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},622:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Table",{ref:t.refs,attrs:{columns:t.columnsList,loading:t.loading,data:t.thisTableData,border:"","disabled-hover":"","highlight-row":""},on:{"on-selection-change":t.selectedIds}})],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},654:function(t,e,a){function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(621),s=i(n),o=a(616),l=i(o),r=a(47),d=i(r),c=a(77);e.default={name:"goodList",components:{"can-edit-table":s.default},data:function(){var t=this;return{spinShow:!1,loading:!1,parent2catid:"",parent1catid:"",catid:"",categorylist:[],idnochange:"",selectedIdList:"",statusid:"",batchUpdateBox:!1,tableloading:!1,id:"",pageNumber:1,goodname:"",typename:"",suppliername:"",isOnline:"",status:"",pageCount:0,totalPages:0,pagesizes:20,merchnatlist:"",merchantlistdata:[],ids:"",isdel:"",deldata:[{id:"0",name:"未删除"},{id:"1",name:"已删除"}],isonlinedata:[{id:"0",name:"未上架"},{id:"1",name:"上架中"}],statusdata:[{id:"0",name:"未审核"},{id:"1",name:"已审核"}],tableColumns:[{type:"selection",width:60,align:"center"},{title:"ID",key:"id",width:80,align:"left"},{title:"序号",key:"sort",align:"left",width:80,editable:!0},{title:"商品名称",key:"name",width:350,align:"left"},{title:"商品类型",key:"type.name",width:100,align:"left"},{title:"供应商",key:"supplier.name",width:90,align:"left"},{title:"上架状态",key:"isOnline",align:"left",width:90,render:function(t,e){return t("div",[t("p",0==e.row.isOnline?"未上架":"上架中")])}},{title:"审核状态",key:"status",align:"left",width:90,render:function(t,e){return t("div",[t("p",0==e.row.status?"未审核":1==e.row.status?"已审核":"注销")])}},{title:"更新时间",key:"updatedTime",width:150,align:"left"},{title:"图片",key:"indexImage",align:"center",width:100,render:function(t,e){return t("div",[t("img",null!=e.row.indexImage?{props:{type:"primary",size:"small"},attrs:{src:c.imgurl+e.row.indexImage,style:"width:30px;height: 30px;border-radius: 2px;"}}:"")])}},{title:"详情",key:"action",width:120,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){var e={id:a.row.id};console.log(e),d.default.openNewPage(t,"gooddetails",e),t.$router.push({name:"gooddetails",params:e})}}},"详情")])}}],tableData:[]}},mounted:function(){var t=this;l.default.$off("selectdelectList"),l.default.$off("nochangeidList"),l.default.$on("selectdelectList",function(e){t.selectedIdList=e;null!==t.selectedIdList&&void 0!==t.selectedIdList&&t.selectedIdList}),l.default.$on("nochangeidList",function(e){t.idnochange=e}),this.getmerchants()},created:function(){var t=this;this.loading=!0,(0,c.getgoodslist)().then(function(e){console.log(e),t.tableData=e.data.list,t.pageCount=e.data.totalRow,t.totalPages=e.data.totalPage,t.pagesizes=e.data.pageSize,t.loading=!1}),this.spinShow=!0,(0,c.getcategoryIdsdata)().then(function(e){t.categorylist=e.data,t.spinShow=!1})},watch:{$route:function(t,e){"goodslist"==t.name&&this.getTableLists(this.pageNumber)}},methods:{del:function(){var t=this;(0,c.deletegood)(this.selectedIdList,"1").then(function(e){"200"==e.code?(t.$Modal.success({title:"温馨提示",content:"<p>删除成功</p>"}),t.getTableLists(t.pageNumber)):t.$Modal.error({title:"温馨提示",content:"<p>"+e.message+"</p>"})})},updatetable:function(t){if(console.log(t),""!=t){var e=t[0].grade;"2"==e?(this.parent2catid=t[0].id,this.parent1catid="",this.catid=""):"1"==e?(this.parent1catid=t[0].id,this.parent2catid="",this.catid=""):(this.catid=t[0].id,this.parent1catid="",this.parent2catid="")}else this.catid="",this.parent1catid="",this.parent2catid="";console.log(this.catid),this.getTableLists(1)},updatetable1:function(t){console.log(t)},updateLists:function(){var t=this;if(null!==this.selectedIdList&&void 0!==this.selectedIdList&&""!==this.selectedIdList){var e=this.selectedIdList.split(","),a={},i=[],n=!0,s=!1,o=void 0;try{for(var l,r=e[Symbol.iterator]();!(n=(l=r.next()).done);n=!0){var d=l.value,u=!0,p=!1,g=void 0;try{for(var h,f=this.$store.state.goods.cacheGoodsTable[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var v=h.value;v.id==d&&i.push({id:v.id,sort:v.sort,status:v.status})}}catch(t){p=!0,g=t}finally{try{!u&&f.return&&f.return()}finally{if(p)throw g}}}}catch(t){s=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(s)throw o}}console.log(JSON.stringify(i)),a.batchUpdateColumnsList=i,(0,c.updategoodlistsort)(a).then(function(e){e.success?(t.$Message.success("修改成功"),t.getTableLists(t.pageNumber)):(console.log(e.message),t.$Message.error(e.message))})}else this.$Message.error("请选择选项")},upBatchUpdate:function(){var t=this;(0,c.batchauditmerchandise)(this.selectedIdList,this.statusid).then(function(e){"200"==e.code?(t.$Modal.success({title:"温馨提示",content:"<p>修改成功</p>"}),t.getTableLists(t.pageNumber),t.batchUpdateBox=!1):(t.$Modal.error({title:"温馨提示",content:"<p>"+e.message+"</p>"}),t.batchUpdateBox=!1)})},clickexamine:function(){""==this.selectedIdList?this.$Notice.warning({title:"请选择需要审核的用户",desc:""}):this.batchUpdateBox=!0},getTableLists:function(t){var e=this;this.loading=!0,setTimeout(function(){(0,c.getgoodslist)(t,e.pagesizes,e.goodname,e.id,e.typename,e.suppliername,e.isOnline,e.status,e.catid,e.parent2catid,e.parent1catid,e.isdel).then(function(t){console.log(t),e.tableData=t.data.list,e.pageCount=t.data.totalRow,e.totalPages=t.data.totalPage,e.pagesizes=t.data.pageSize,e.loading=!1})},500)},selectIds:function(t){var e=this;t.forEach(function(t,a){e.ids=0==a?t.id:e.ids+","+t.id}),console.log("下标"+t)},getmerchants:function(){var t=this;(0,c.getmerchantlist)().then(function(e){console.log(e.data),t.merchantlistdata=e.data})}}}},725:function(t,e){},793:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("row",[a("Col",{attrs:{span:"20"}},[a("card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("icon",{attrs:{type:"ios-list"}}),t._v("\n                    商品列表\n                ")],1),t._v(" "),a("div",{staticClass:"sreach"},[a("div",{staticClass:"sreach-page"},[a("div",{staticClass:"sreach-box"},[a("span",[t._v("商品ID:")]),t._v(" "),a("i-input",{attrs:{placeholder:"请输入商品ID..."},model:{value:t.id,callback:function(e){t.id=e},expression:"id"}})],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[t._v("商品名称:")]),t._v(" "),a("i-input",{attrs:{placeholder:"请输入商品名称..."},model:{value:t.goodname,callback:function(e){t.goodname=e},expression:"goodname"}})],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[t._v("商品类型:")]),t._v(" "),a("i-input",{attrs:{placeholder:"请输入商品类型..."},model:{value:t.typename,callback:function(e){t.typename=e},expression:"typename"}})],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[t._v("商品状态:")]),t._v(" "),a("i-select",{attrs:{clearable:"",filterable:""},model:{value:t.isdel,callback:function(e){t.isdel=e},expression:"isdel"}},t._l(t.deldata,function(e){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)]),t._v(" "),a("div",{staticClass:"sreach-page"},[a("div",{staticClass:"sreach-box"},[a("span",[t._v("供应商名称:")]),t._v(" "),a("i-input",{attrs:{placeholder:"请输入供应商名称..."},model:{value:t.suppliername,callback:function(e){t.suppliername=e},expression:"suppliername"}})],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[t._v("是否上架:")]),t._v(" "),a("i-select",{attrs:{clearable:"",filterable:""},model:{value:t.isOnline,callback:function(e){t.isOnline=e},expression:"isOnline"}},t._l(t.isonlinedata,function(e){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[t._v("审核状态:")]),t._v(" "),a("i-select",{attrs:{clearable:"",filterable:""},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.statusdata,function(e){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{staticClass:"sreach-box"},[a("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[a("i-button",{attrs:{type:"info",icon:"ios-search"},on:{click:function(e){t.getTableLists(1)}}},[t._v("搜索")])],1)])]),t._v(" "),a("div",{staticClass:"sreach-page"},[a("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[a("i-button",{attrs:{type:"info",icon:""},on:{click:t.updateLists}},[t._v("保存")]),t._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(e){t.clickexamine()}}},[t._v("审核")]),t._v(" "),a("i-button",{attrs:{type:"error"},on:{click:function(e){t.del()}}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"sreach-box linenumcss"},[a("p",[t._v("总共 "),a("span",[t._v(t._s(t.pageCount))]),t._v(" 条记录")]),t._v(" "),a("p",[t._v("共 "),a("span",[t._v(t._s(t.totalPages))]),t._v(" 页")])])])]),t._v(" "),a("div",{staticClass:"tableContainer"},[a("can-edit-table",{staticClass:"table",attrs:{refs:"tableExcel",editIncell:!0,loading:t.loading,"columns-list":t.tableColumns},model:{value:t.tableData,callback:function(e){t.tableData=e},expression:"tableData"}})],1),t._v(" "),a("div",{staticClass:"page-box",staticStyle:{"text-align":"right","margin-top":"15px"}},[a("page",{attrs:{total:t.pageCount,"page-size":t.pagesizes,"show-elevator":"","show-total":""},on:{"on-change":t.getTableLists}})],1)])],1),t._v(" "),a("Col",{attrs:{span:"4"}},[a("div",{},[a("Card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"navicon-round"}}),t._v("\n                            分类目录\n                        ")],1),t._v(" "),a("Tabs",{attrs:{type:"card"}},[a("TabPane",{attrs:{label:"商品分类目录"}},[t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),a("div",{staticStyle:{"padding-left":"1.5rem"}},[a("Tree",{attrs:{data:t.categorylist,multiple:!1},on:{"on-check-change":t.updatetable1,"on-select-change":t.updatetable}})],1)],1)],1)],1)],1)])],1),t._v(" "),a("modal",{attrs:{width:"360"},model:{value:t.batchUpdateBox,callback:function(e){t.batchUpdateBox=e},expression:"batchUpdateBox"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("icon",{attrs:{type:"information-circled"}}),a("span",[t._v("请选择")])],1),t._v(" "),a("div",[a("i-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:t.statusid,callback:function(e){t.statusid=e},expression:"statusid"}},t._l(t.statusdata,function(e){return a("i-option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:t.upBatchUpdate}},[t._v("确认提交")])],1)])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});