webpackJsonp([32],{599:function(e,t,a){a(726);var s=a(32)(a(671),a(794),null,null);s.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\peoplelist.vue",s.esModule&&Object.keys(s.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),s.options.functional&&console.error("[vue-loader] peoplelist.vue: functional components are not supported with templates, they should use render functions."),e.exports=s.exports},671:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var s=a(47),o=function(e){return e&&e.__esModule?e:{default:e}}(s),n=a(77);t.default={name:"extension",data:function(){return{maxbuyupdatenum:"",maxbuy:!1,maxbuynumber:"",updatetype:"",addname:"",money:"",peoplecz:!1,peoplecznum:"",peoplecznumtype:0,balancenumarray:"",pointnumarray:"",focusState:"",memberType:"",refundBtn:!1,memberTypedata:[{id:"1",name:"普通会员"},{id:"2",name:"店长"},{id:"3",name:"普通商家"},{id:"4",name:"银牌商家"},{id:"5",name:"金牌商家"},{id:"6",name:"钻石商家"},{id:"9",name:"区域管理员"}],peopletypeUpdateBox:!1,peopletype:"",peopletypedata:[{id:"1",name:"普通会员"},{id:"2",name:"店长"},{id:"3",name:"商家"}],peoplenumberxg:!1,updatapeoplenumber:"",peoplename:"",peoplemember:"",parentpeoplename:"",pageCount:0,totalPages:0,pagesizes:20,choiceid:0,ids:"",tableColumns:[{type:"selection",width:60,align:"center"},{title:"id",key:"id",width:60,align:"center"},{title:"用户编号",key:"memberNo",width:110,align:"center"},{title:"头像",key:"image",width:68,align:"center",render:function(e,t){return e("div",{attrs:{style:"width: 30px;height: 30px;"}},[e("img",null!=t.row.image?{props:{type:"primary",size:"small"},attrs:{src:t.row.image,style:"width:30px;height: 30px;border-radius: 2px;"},style:{}}:"")])}},{title:"昵称",key:"username",width:130,align:"center",render:function(e,t){return e("div",[e("span",null!=t.row.nickname&&"null"!=t.row.nickname&&""!=t.row.nickname?decodeURI(decodeURI(t.row.nickname)):t.row.username)])}},{title:"用户类型",key:"memberType",align:"center",render2:function(e,t){return e("div",[e("span",1==t.row.memberType?"普通会员":2==t.row.memberType?"店长":3==t.row.memberType?"商家":"")])},render:function(e,t){var a="";switch(t.row.memberType){case 1:a="普通会员";break;case 2:a="店长";break;case 3:a="普通商家";break;case 4:a="银牌商家";break;case 5:a="金牌商家";break;case 6:a="钻石商家";break;case 3:a="区域管理员"}return e("div",[e("span",a)])}},{title:"父级昵称",key:"parent.username",width:130,align:"center",render:function(e,t){return e("div",[e("span",null!=t.row["parent.nickname"]&&"null"!=t.row["parent.nickname"]&&""!=t.row["parent.nickname"]?decodeURI(decodeURI(t.row["parent.nickname"])):t.row["parent.username"])])}},{title:"余额",key:"balance",align:"center",render:function(e,t){return e("div",[e("span",null==t.row.balance||""==t.row.balance?"0":t.row.balance)])}},{title:"库存积分",key:"point",align:"center",render:function(e,t){return e("div",[e("span",parseInt(1e3*parseFloat(t.row.point))/1e3)])}},{title:"收益珠宝",key:"incomeCoin",align:"center",render:function(e,t){return e("div",[e("span",parseInt(1e3*parseFloat(t.row.incomeCoin))/1e3)])}},{title:"消费珠宝",key:"consumeCoin",align:"center",render:function(e,t){return e("div",[e("span",parseInt(1e3*parseFloat(t.row.consumeCoin))/1e3)])}},{title:"购买限制",key:"maxBuyPoint",align:"center"}],tableData:[]}},mounted:function(){var e=this;if(this.peoplename=sessionStorage.setItem("peoplename",""),this.peoplemember=sessionStorage.setItem("peoplemember",""),this.parentpeoplename=sessionStorage.setItem("parentpeoplename",""),this.memberType=sessionStorage.setItem("peoplememberType",""),sessionStorage.getItem("peoplelists")&&(this.list=JSON.parse(sessionStorage.getItem("peoplelists")),this.pageCount=Number(sessionStorage.getItem("peoplepageCounts")),this.linebox=Number(sessionStorage.getItem("peoplelineboxs")),this.pageSizes=this.linebox,this.totalPages=Number(sessionStorage.getItem("peopletotalPages"))),sessionStorage.getItem("peoplename")&&(this.peoplename=sessionStorage.getItem("peoplename")),sessionStorage.getItem("peoplemember")&&(this.peoplemember=sessionStorage.getItem("peoplemember")),sessionStorage.getItem("parentpeoplename")&&(this.parentpeoplename=sessionStorage.getItem("parentpeoplename")),sessionStorage.getItem("peoplememberType")&&(this.memberType=sessionStorage.getItem("peoplememberType")),sessionStorage.getItem("peoplelists"))this.pageCount=Number(sessionStorage.getItem("peoplepageCounts")),this.linebox=Number(sessionStorage.getItem("peoplelineboxs")),this.pageSizes=this.linebox,this.totalPages=Number(sessionStorage.getItem("peopletotalPages")),this.getpeoplememberList(this.pageNumber,this.pageSizes);else{this.tableloading=!0,(0,n.getpeoplemember)().then(function(t){console.log(t),e.tableData=t.data.list,e.pageCount=t.data.totalRow,e.totalPages=t.data.totalPage,e.pagesizes=t.data.pageSize,e.tableloading=!1})}},created:function(){},watch:{$route:function(){}},methods:{getpeoplememberList:function(e){var t=this;this.loading=!0;(0,n.getpeoplemember)(e,this.pagesizes,"",this.peoplename,this.peoplemember,this.memberType,this.parentpeoplename).then(function(e){console.log(e),t.tableData=e.data.list,t.pageCount=e.data.totalRow,t.totalPages=e.data.totalPage,t.pagesizes=e.data.pageSize,sessionStorage.removeItem("peoplelists"),sessionStorage.removeItem("peoplepageCounts"),sessionStorage.removeItem("peoplename"),sessionStorage.removeItem("peoplemember"),sessionStorage.removeItem("parentpeoplename"),sessionStorage.removeItem("peoplelineboxs"),sessionStorage.removeItem("peopletotalPages");var a=JSON.stringify(e.data);sessionStorage.setItem("peoplelists",a),sessionStorage.setItem("peoplelineboxs",t.pagesizes),sessionStorage.setItem("peoplememberType",t.memberType),sessionStorage.setItem("peopletotalPages",t.totalPages),sessionStorage.setItem("peoplepageCounts",e.data.totalRow),t.peoplename&&sessionStorage.setItem("peoplename",t.peoplename),t.peoplemember&&sessionStorage.setItem("peoplemember",t.peoplemember),t.parentpeoplename&&sessionStorage.setItem("parentpeoplename",t.parentpeoplename),t.loading=!1})},peopleczBox:function(e){null!==this.ids&&void 0!==this.ids&&""!==this.ids?"number"==typeof this.ids?(this.peoplecz=!0,this.addname=this.item.username,this.money=this.item.balance,this.peoplecznumtype=e,1==e?(this.updatetype="余额",this.money=this.item.balance+"元"):2==e&&(this.updatetype="积分",this.money=parseInt(1e3*parseFloat(this.item.point))/1e3+"分")):this.$Message.error("请选择一位用户"):this.$Message.error("请选择需要充值的用户")},clickrefund:function(){var e=this;if(""!=this.peoplecznum&&" "!=this.peoplecznum&&null!=this.peoplecznum&&void 0!=this.peoplecznum){var t="";if(1==this.peoplecznumtype){var a=/^(-)?[0-9]+(\d{0,20})+(\.\d{1,2})?$/;if(!a.exec(this.peoplecznum))return this.peoplecznum="",void(this.focusState=!0);parseFloat(this.balancenumarray)+parseFloat(this.peoplecznum),this.refundBtn=!0,(0,n.addBalance)(this.ids,this.peoplecznum).then(function(t){console.log(t),e.refundBtn=!1,t.success?(e.$Message.success("提交成功"),e.getpeoplememberList(e.pageNumber,e.pageSizes),e.ids=""):e.$Message.error(t.message),e.peoplecz=!1,e.focusState=!1,e.peoplecznum=""})}if(2==this.peoplecznumtype){var a=/^(-)?[0-9]+(\d{0,20})+(\.\d{1,2})?$/;if(!a.exec(this.peoplecznum))return this.peoplecznum="",void(this.focusState=!0);t=parseFloat(this.pointnumarray)+parseFloat(this.peoplecznum),t=parseFloat(t).toFixed(3),(0,n.addPoint)(this.ids,this.peoplecznum).then(function(t){console.log(t),t.success?(e.$Message.success("提交成功"),e.getpeoplememberList(e.pageNumber,e.pageSizes),e.ids=""):e.$Message.error(t.message),e.peoplecz=!1,e.focusState=!1,e.peoplecznum=""})}}},updatepeopletype:function(e){if(""==this.ids)this.$Notice.warning({title:"请选择需要修改的用户",desc:""});else{this.ids;this.peopletypeUpdateBox=!0}},upBatchUpdate:function(){var e=this;(0,n.updatepeoplelist)(this.ids,"","",this.peopletype).then(function(t){t.success?(e.$Message.success("修改成功"),e.getpeoplememberList(e.pageNumber,e.pageSizes)):e.$Message.error("修改失败"),e.peopletypeUpdateBox=!1})},gobdparentpeople:function(){if(""==this.ids)this.$Notice.warning({title:"请选择需要修改的用户",desc:""});else{var e={id:this.ids};o.default.openNewPage(this,"bindingparentpeople",e),this.$router.push({name:"bindingparentpeople",params:e}),this.ids=""}},updatemaxBuyPoint:function(){null!==this.ids&&void 0!==this.ids&&""!==this.ids?"number"==typeof this.ids?(this.maxbuy=!0,this.addname=this.item.username,this.maxbuynumber=this.item.maxBuyPoint,this.maxbuyupdatenum=this.item.maxBuyPoint):this.$Message.error("请选择一位用户"):this.$Message.error("请选择需要修改的用户")},updatepeoplenumber:function(){if(""==this.ids)this.$Notice.warning({title:"请选择需要修改的用户",desc:""});else{this.ids;this.peoplenumberxg=!0}},clickmaxbuy:function(){var e=this;""!=this.maxbuyupdatenum&&" "!=this.maxbuyupdatenum&&null!=this.maxbuyupdatenum&&void 0!=this.maxbuyupdatenum&&(0,n.updatemaxbuy)(this.ids,this.maxbuyupdatenum).then(function(t){console.log(t),t.success?(e.$Message.success("提交成功"),e.getpeoplememberList(e.pageNumber,e.pageSizes),e.ids=""):e.$Message.error(t.message),e.maxbuy=!1,e.maxbuyupdatenum=""})},clickeoplenumber:function(){var e=this;""!=this.updatapeoplenumber&&" "!=this.updatapeoplenumber&&null!=this.updatapeoplenumber&&void 0!=this.updatapeoplenumber&&(0,n.updatpeoplememberid)(this.ids,this.updatapeoplenumber).then(function(t){console.log(t),t.success?(e.$Message.success("提交成功"),e.getpeoplememberList(e.pageNumber,e.pageSizes),e.ids=""):e.$Message.error(t.message),e.peoplenumberxg=!1,e.updatapeoplenumber=""})},selectIds:function(e){var t=this;e.forEach(function(e,a){0==a?(t.ids=e.id,t.item=e):t.ids=t.ids+","+e.id,console.log(e),t.balancenumarray=null==e.balance?"0":e.balance,t.pointnumarray=null==e.point?"0":e.point})}}}},726:function(e,t){},794:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("row",[a("card",[a("p",{attrs:{slot:"title"},slot:"title"},[a("icon",{attrs:{type:"ios-list"}}),e._v("人员管理")],1),e._v(" "),a("div",{staticClass:"sreach"},[a("div",{staticClass:"sreach-page"},[a("div",{staticClass:"sreach-box"},[a("span",[e._v("用户昵称:")]),e._v(" "),a("i-input",{attrs:{placeholder:"请输入用户昵称..."},model:{value:e.peoplename,callback:function(t){e.peoplename=t},expression:"peoplename"}})],1),e._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[e._v("用户编号:")]),e._v(" "),a("i-input",{attrs:{placeholder:"请输入用户编号..."},model:{value:e.peoplemember,callback:function(t){e.peoplemember=t},expression:"peoplemember"}})],1),e._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[e._v("父级昵称:")]),e._v(" "),a("i-input",{attrs:{placeholder:"请输入用户昵称..."},model:{value:e.parentpeoplename,callback:function(t){e.parentpeoplename=t},expression:"parentpeoplename"}})],1),e._v(" "),a("div",{staticClass:"sreach-box"},[a("span",[e._v("用户类型:")]),e._v(" "),a("i-select",{attrs:{clearable:"",filterable:""},model:{value:e.memberType,callback:function(t){e.memberType=t},expression:"memberType"}},e._l(e.memberTypedata,function(t){return a("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),a("div",{staticClass:"sreach-page"},[a("div",{staticClass:"sreach-box box2flex3"},[a("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[a("i-button",{attrs:{type:"info",icon:"ios-search"},on:{click:function(t){e.getpeoplememberList(1)}}},[e._v("搜索")])],1),e._v(" "),a("div",{staticClass:"sreach-box sreach-box2 ",staticStyle:{"margin-left":"1rem"}},[a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.peopleczBox(1)}}},[e._v("充值余额")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.peopleczBox(2)}}},[e._v("充值积分")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.updatepeopletype()}}},[e._v("修改用户类型")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.gobdparentpeople()}}},[e._v("修改父级人员")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.updatepeoplenumber()}}},[e._v("修改用户编号")]),e._v(" "),a("i-button",{attrs:{type:"warning"},on:{click:function(t){e.updatemaxBuyPoint()}}},[e._v("修改购买限制")])],1)]),e._v(" "),a("div",{staticClass:"sreach-box linenumcss"},[a("p",[e._v("总共 "),a("span",[e._v(e._s(e.pageCount>0?e.pageCount:0))]),e._v(" 条记录")]),e._v(" "),a("p",[e._v("共 "),a("span",[e._v(e._s(e.totalPages))]),e._v(" 页")]),e._v(" "),a("p",[e._v("每页 "),a("i-input",{staticStyle:{width:"45px"},attrs:{number:"",placeholder:""},model:{value:e.pagesizes,callback:function(t){e.pagesizes=t},expression:"pagesizes"}}),e._v(" 条")],1)])])]),e._v(" "),a("i-table",{staticStyle:{width:"100%"},attrs:{columns:e.tableColumns,data:e.tableData},on:{"on-selection-change":e.selectIds}}),e._v(" "),a("div",{staticClass:"page-box",staticStyle:{"text-align":"right","margin-top":"15px"}},[a("page",{attrs:{total:e.pageCount>0?e.pageCount:0,"page-size":e.pagesizes,"show-elevator":"","show-total":""},on:{"on-change":e.getpeoplememberList}})],1)],1)],1),e._v(" "),a("modal",{attrs:{width:"360"},model:{value:e.peoplecz,callback:function(t){e.peoplecz=t},expression:"peoplecz"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("icon",{attrs:{type:"information-circled"}}),a("span",[e._v("请输入需要充值的数目")])],1),e._v(" "),a("div",[a("span",[a("b",[e._v("当前"),a("span",[e._v(e._s(e.updatetype))]),e._v("为")]),e._v(":   "+e._s(e.money))])]),e._v(" "),a("br"),e._v(" "),a("div",[a("span",[e._v("您现在为 "),a("b",{staticStyle:{color:"red"}},[e._v(e._s(e.addname))]),e._v(" 用户充值"),a("span",{staticStyle:{color:"red"}},[e._v(" "),a("b",[e._v(e._s(e.updatetype))]),e._v(" ")]),e._v("：")])]),e._v(" "),a("br"),e._v(" "),a("div",[a("i-input",{attrs:{Number:"",placeholder:"请输入..."},model:{value:e.peoplecznum,callback:function(t){e.peoplecznum=t},expression:"peoplecznum"}})],1),e._v(" "),a("div",{staticClass:"peopleczdatacss"},[1==e.focusState?a("p",{staticClass:"redtxtts"},[e._v("请输入正确的数目")]):e._e()]),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large",long:"",disabled:e.refundBtn},on:{click:function(t){e.clickrefund()}}},[e._v("确认提交")])],1)]),e._v(" "),a("modal",{attrs:{width:"360"},model:{value:e.maxbuy,callback:function(t){e.maxbuy=t},expression:"maxbuy"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("icon",{attrs:{type:"information-circled"}}),a("span",[e._v("请输入需要修改的购买限制")])],1),e._v(" "),a("div",[a("span",[a("b",[e._v("当前用户的购买限制为")]),e._v(":   "+e._s(e.maxbuynumber))])]),e._v(" "),a("br"),e._v(" "),a("div",[a("span",[e._v("您现在为 "),a("b",{staticStyle:{color:"red"}},[e._v(e._s(e.addname))]),e._v(" 用户修改 "),a("span",{staticStyle:{color:"red"}},[a("b",[e._v("购买限制")])]),e._v(" ：")])]),e._v(" "),a("br"),e._v(" "),a("div",[a("i-input",{attrs:{Number:"",placeholder:"请输入..."},model:{value:e.maxbuyupdatenum,callback:function(t){e.maxbuyupdatenum=t},expression:"maxbuyupdatenum"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.clickmaxbuy()}}},[e._v("确认提交")])],1)]),e._v(" "),a("modal",{attrs:{width:"360"},model:{value:e.peoplenumberxg,callback:function(t){e.peoplenumberxg=t},expression:"peoplenumberxg"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("icon",{attrs:{type:"information-circled"}}),a("span",[e._v("请输入需要修改的用户")])],1),e._v(" "),a("div",[a("i-input",{attrs:{Number:"",placeholder:"请输入..."},model:{value:e.updatapeoplenumber,callback:function(t){e.updatapeoplenumber=t},expression:"updatapeoplenumber"}})],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.clickeoplenumber()}}},[e._v("确认提交")])],1)]),e._v(" "),a("modal",{attrs:{width:"360"},model:{value:e.peopletypeUpdateBox,callback:function(t){e.peopletypeUpdateBox=t},expression:"peopletypeUpdateBox"}},[a("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("icon",{attrs:{type:"information-circled"}}),a("span",[e._v("请选择")])],1),e._v(" "),a("div",[a("i-select",{attrs:{clearable:"",placeholder:"请选择"},model:{value:e.peopletype,callback:function(t){e.peopletype=t},expression:"peopletype"}},e._l(e.peopletypedata,function(t){return a("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:e.upBatchUpdate}},[e._v("确认提交")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});