webpackJsonp([41],{590:function(e,t,s){s(743);var a=s(32)(s(662),s(813),null,null);a.options.__file="D:\\Develop\\ZhidanCode\\chuangshi\\web\\src\\views\\cccec\\operation\\optuser.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] optuser.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},662:function(e,t,s){Object.defineProperty(t,"__esModule",{value:!0});var a=s(47),i=(function(e){e&&e.__esModule}(a),s(77));t.default={name:"extension",props:["bingdingid"],data:function(){return{usernames:"",pageCount:0,totalPages:0,pagesizes:20,pageNumber:1,choiceid:0,ids:"",tableColumns:[{title:"Id",key:"id",align:"center"},{title:"用户名",key:"nickname",align:"center"},{title:"帐号",key:"operNo",align:"center"},{title:"手机号码",key:"mobile",align:"center"},{title:"级别类型",key:"level",align:"left",width:100,render:function(e,t){var s="";switch(t.row.level){case 1:s="省";break;case 2:s="市";break;case 3:s="区"}return e("div",[e("div",s)])}},{title:"所属地区",key:"area.fullName",align:"center"}],levelTypelist:[{id:1,name:"省"},{id:2,name:"市"},{id:3,name:"区"}],tableData:[],saveuserBox:!1,saveusername:"",saveuserNo:"",saveuserpw:"",savemobile:"",roleName:[],roledata:[],bingdingrole:!1,levelType:"",supplierIdlist:[],province:"",provincelist:[],provinceable:!0,city:"",citylist:[],cityable:!0,town:"",townlist:[],townable:!0}},mounted:function(){sessionStorage.getItem("peoplelists")&&(this.list=JSON.parse(sessionStorage.getItem("peoplelists")),this.pageCount=Number(sessionStorage.getItem("peoplepageCounts")),this.linebox=Number(sessionStorage.getItem("peoplelineboxs")),this.pageSizes=this.linebox,this.totalPages=Number(sessionStorage.getItem("peopletotalPages"))),sessionStorage.getItem("usernames")&&(this.usernames=sessionStorage.getItem("usernames"))},created:function(){this.init()},beforeRouteEnter:function(e,t,s){s(function(e){})},watch:{},methods:{init:function(){var e=this;(0,i.getareapartner)().then(function(t){e.tableData=t.data.list,e.pageCount=t.data.totalRow,e.totalPages=t.data.totalPage,e.pagesizes=t.data.pageSize})},getsupplier:function(){var e=this;(0,i.getgoodsupplier)().then(function(t){e.supplierIdlist=t.data})},getpeopleList:function(e){var t=this;this.loading=!0,console.log(this.usernames);(0,i.getareapartner)(e,this.pagesizes,this.usernames).then(function(e){console.log(e),t.tableData=e.data.list,t.pageCount=e.data.totalRow,t.totalPages=e.data.totalPage,t.pagesizes=e.data.pageSize,t.pageNumber=e.data.pageNumber,sessionStorage.removeItem("peoplelists"),sessionStorage.removeItem("peoplepageCounts"),sessionStorage.removeItem("usernames"),sessionStorage.removeItem("peoplelineboxs"),sessionStorage.removeItem("peopletotalPages");var s=JSON.stringify(e.data.list);sessionStorage.setItem("peoplelists",s),sessionStorage.setItem("peoplelineboxs",t.pagesizes),sessionStorage.setItem("peopletotalPages",t.totalPages),sessionStorage.setItem("peoplepageCounts",e.data.totalRow),t.usernames&&sessionStorage.setItem("usernames",t.usernames),t.loading=!1})},bindinguserbtn:function(){var e=this;console.log(this.bingdingid),this.loading=!0,this.bingdingid&&(0,i.bindingoperNo)(this.bingdingid,this.ids).then(function(t){e.loading=!1,"200"==t.code?(e.$Modal.success({title:"温馨提示",content:"绑定成功"}),setTimeout(function(e){e.$emit("clickuser",!1)},1e3,e)):e.$Modal.error({title:"温馨提示",content:t.message})})},getrole:function(){var e=this;(0,i.getrolelist)().then(function(t){e.roledata=t.data})},saveuserbtn:function(){this.saveuserBox=!0},saveuser:function(){var e=this,t={};t.nickname=this.saveusername,t.operNo=this.saveuserNo,t.password=this.saveuserpw,t.mobile=this.savemobile,t.level=this.levelType,t.areaId=0,1==this.levelType&&(t.areaId=this.province),2==this.levelType&&(t.areaId=this.city),3==this.levelType&&(t.areaId=this.town),console.log("params.areaId:"+t.areaId),(0,i.saveareapartner)(t).then(function(t){"200"==t.code?e.$Modal.success({title:"温馨提示",content:"新增成功"}):e.$Modal.error({title:"温馨提示",content:t.message}),e.saveuserBox=!1,e.getpeopleList(e.pageNumber)})},saverolebtn:function(){""==this.ids?this.$Notice.warning({title:"请选择需要绑定的用户",desc:""}):this.bingdingrole=!0},roleUpdate:function(){var e=this;if(this.roleName){var t={};t.operNo=this.ids,t.roleNames=this.roleName.join(","),(0,i.saveoperatorrole)(t).then(function(t){"200"==t.code?e.$Modal.success({title:"温馨提示",content:"绑定成功"}):e.$Modal.error({title:"温馨提示",content:t.message}),e.getpeopleList(e.pageNumber),e.bingdingrole=!1})}},selectIds:function(e){var t=this;e.forEach(function(e,s){t.ids=0==s?e.operNo:t.operNo+","+e.operNo})},selectLevel:function(e){var t=this;console.log("selectLevel"),this.provinceable=!1,console.log("province:"+this.province),console.log("selectLevel:"+this.levelType),this.provinceable=!0,this.cityable=!0,this.townable=!0,this.levelType>=1&&(this.provinceable=!1,(0,i.getarealevel)(1,0).then(function(e){t.provincelist=e.data})),this.levelType>=2&&(this.cityable=!1),this.levelType>=3&&(this.townable=!1)},selectProvince:function(e){var t=this;console.log("province:"+this.province),(0,i.getarealevel)(2,this.province).then(function(e){t.citylist=e.data})},selectCity:function(e){var t=this;console.log("city:"+this.city),(0,i.getarealevel)(3,this.city).then(function(e){t.townlist=e.data})},selectTown:function(e){console.log("town:"+this.town)}}}},743:function(e,t){},813:function(e,t,s){e.exports={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("row",[s("card",[s("p",{attrs:{slot:"title"},slot:"title"},[s("Icon",{attrs:{type:"ios-list"}}),e._v(" "),s("span",[e._v("运营用户")])],1),e._v(" "),s("div",{staticClass:"sreach"},[s("div",{staticClass:"sreach-page"},[s("div",{staticClass:"sreach-box"},[s("span",[e._v("用户名:")]),e._v(" "),s("i-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.usernames,callback:function(t){e.usernames=t},expression:"usernames"}})],1),e._v(" "),s("div",{staticClass:"sreach-box"},[s("div",{staticClass:"sreach-box sreach-box2",staticStyle:{"text-align":"right"}},[s("i-button",{attrs:{type:"info",icon:"ios-search"},on:{click:function(t){e.getpeopleList(1)}}},[e._v("搜索")]),e._v(" "),e.bingdingid?s("i-button",{attrs:{type:"warning"},on:{click:function(t){e.bindinguserbtn()}}},[e._v("绑定用户")]):e._e(),e._v(" "),null==e.bingdingid?s("i-button",{attrs:{type:"warning"},on:{click:function(t){e.saveuserbtn()}}},[e._v("新增区域运营用户")]):e._e()],1)]),e._v(" "),s("div",{staticClass:"sreach-box linenumcss"},[s("p",[e._v("总共 "),s("span",[e._v(e._s(e.pageCount))]),e._v(" 条记录")]),e._v(" "),s("p",[e._v("共 "),s("span",[e._v(e._s(e.totalPages))]),e._v(" 页")]),e._v(" "),s("p",[e._v("每页\n                                "),s("i-input",{staticStyle:{width:"45px"},attrs:{number:"",placeholder:""},model:{value:e.pagesizes,callback:function(t){e.pagesizes=t},expression:"pagesizes"}}),e._v(" 条")],1)])]),e._v(" "),s("div",{staticClass:"sreach-page"})]),e._v(" "),s("i-table",{staticStyle:{width:"100%"},attrs:{columns:e.tableColumns,data:e.tableData},on:{"on-selection-change":e.selectIds}}),e._v(" "),s("div",{staticClass:"page-box",staticStyle:{"text-align":"right","margin-top":"15px"}},[s("page",{attrs:{total:e.pageCount,"page-size":e.pagesizes,"show-elevator":"","show-total":""},on:{"on-change":e.getpeopleList}})],1)],1)],1),e._v(" "),s("modal",{attrs:{width:"450"},model:{value:e.saveuserBox,callback:function(t){e.saveuserBox=t},expression:"saveuserBox"}},[s("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("span",[e._v("新增用户")])]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("用户名：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-input",{attrs:{placeholder:"请输入"},model:{value:e.saveusername,callback:function(t){e.saveusername=t},expression:"saveusername"}})],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("帐号：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-input",{attrs:{placeholder:"请输入"},model:{value:e.saveuserNo,callback:function(t){e.saveuserNo=t},expression:"saveuserNo"}})],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("密码：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-input",{attrs:{placeholder:"请输入"},model:{value:e.saveuserpw,callback:function(t){e.saveuserpw=t},expression:"saveuserpw"}})],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("手机号码：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-input",{attrs:{placeholder:"请输入"},model:{value:e.savemobile,callback:function(t){e.savemobile=t},expression:"savemobile"}})],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("级别类型：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-select",{attrs:{clearable:"",filterable:""},on:{"on-selection-change":e.selectLevel,"on-change":e.selectLevel},model:{value:e.levelType,callback:function(t){e.levelType=t},expression:"levelType"}},e._l(e.levelTypelist,function(t){return s("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}))],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("省：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-select",{ref:"provinceref",attrs:{clearable:"",filterable:"",disabled:e.provinceable},on:{"on-change":e.selectProvince},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provincelist,function(t){return s("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.area))])}))],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("市：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-select",{ref:"cityref",attrs:{clearable:"",filterable:"",disabled:e.cityable},on:{"on-change":e.selectCity},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.citylist,function(t){return s("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.area))])}))],1)]),e._v(" "),s("div",{staticClass:"flexbox"},[s("div",{staticClass:"flex1 headertxt"},[e._v("区：")]),e._v(" "),s("div",{staticClass:"flex5"},[s("i-select",{ref:"townref",attrs:{clearable:"",filterable:"",disabled:e.townable},on:{"on-change":e.selectTown},model:{value:e.town,callback:function(t){e.town=t},expression:"town"}},e._l(e.townlist,function(t){return s("i-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.area))])}))],1)]),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.saveuser()}}},[e._v("确认提交")])],1)]),e._v(" "),s("modal",{attrs:{width:"360"},model:{value:e.bingdingrole,callback:function(t){e.bingdingrole=t},expression:"bingdingrole"}},[s("p",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[s("icon",{attrs:{type:"information-circled"}}),s("span",[e._v("请选择")])],1),e._v(" "),s("div",[s("i-select",{attrs:{multiple:"",clearable:"",placeholder:"请选择"},model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}},e._l(e.roledata,function(t){return s("i-option",{key:t.name,attrs:{value:t.name}},[e._v(e._s(t.cnName))])}))],1),e._v(" "),s("div",{attrs:{slot:"footer"},slot:"footer"},[s("i-button",{attrs:{type:"primary",size:"large",long:""},on:{click:function(t){e.roleUpdate()}}},[e._v("确认提交")])],1)])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});